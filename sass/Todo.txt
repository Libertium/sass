
TODO:
=====

(Ok) Resoldre problema de linia amb comentari que dona error al ensamblar
(Ok) Modificador --asmsx per compatibilitzar el codi generat per aquest ensamblador
(Ok) les etiquetes locals .label: sembla que no funcionen be, i cal validar-ho 
(Ok) fer que el format @@label: sigui sinonim de .label: 
(Ok) Validar els DB amb les musiques de WD per veure que totes les ensambla correctament
(Ok) Poder fer un incbin per incorporar binaris, i admetre offset i size.
(Ok) Al incbin fer que el PC s'actualitzi amb la mida dels bytes afegits.
(Ok) Fer que .ds sigui sinonim del .fill
(Ok) Si hi ha un tab entre el .org i la adreça 04600h el org es ignorat
(Cesc) Implementar la directiva .rom: els .org al rang 0x4000-0xBFFF fan que les dades al binari de sortida es generin en trams de 8Kb
(Cesc) Revisar els ORG que no funcionen com es d'esperar
(Cesc) Incorporar les directives subpage per poder generar megaroms:
	megarom_bank0	.equ		04000h
	megarom_bank1	.equ		06000h
	megarom_bank2	.equ		08000h
	megarom_bank3	.equ		0A000h
	.page 2					; equivale a .ORG 8000h 
	.subpage 2 at $8000	
	.subpage 3 at $A000	

	defpage 0, 0x4000, 0x2000
    defpage 1, 0x6000, 0x2000
    defpage 2, 0x8000, 0x2000
    ;defpage 3..63, 0xa000, 0x2000

	defpage 3..9, 0xa000, 0x2000
	defpage 10, 0x4000, 0x2000
	defpage 11, 0x6000, 0x2000
	defpage 12, 0x4000, 0x2000
	defpage 13, 0x6000, 0x2000
	defpage 14, 0x4000, 0x2000
    defpage 15..63, 0xa000, 0x2000

    page 0..2
    map 0xc000


    .ROM
Define la cabecera para producir una ROM. Es imprescindible
indicar antes la posición, que puede hacerse con la directiva .PAGE. También es
conveniente indicar con la directiva .START el punto de inicio del programa.
 .MEGAROM [mapeador]
Define la cabecera y estructura para producir
una megaROM. Por defecto se define también la subpágina 0 del mapeador, por
lo que no es necesario incluir ninguna instrucción ORG ni PAGE o SUBPAGE
previa. Los tipos de mapeador soportado son los siguientes:
o Konami: tamaño de subpágina de 8 KB, límite de 32 páginas. El tamaño
máximo de la megaROM será de 256 KB (2 megabits). Entre 4000h y
5FFFh está necesariamente la subpágina 0, es decir, no puede
cambiarse.
o KonamiSCC: tamaño de subpágina de 8 KB, límite de 64 páginas. El
tamaño máximo de la megaROM será de 512 KB (4 megabits). Soporta
acceso a SCC, el Sound Custom Chip de Konami.
o ASCII8: tamaño de subpágina de 8 KB, límite de 256 páginas. El tamaño
máximo de la megaROM será de 2048 KB (16 megabits, 2 megabytes).
o ASCII16: tamaño de subpágina de 16 KB, límite de 256 páginas. El
tamaño máximo de la megaROM será de 4096 KB (32 megabits, 4
megabytes).


	.SIZE X Establece el tamaño del archivo resultante en Kilobytes.

(Cesc) Directives PHASE -- DEPHASE per ensamblar codi al espai on es defineix pero declarant les adreces en un ambit diferent de forma que es pugui fer un reallocate a aquestes adreces.
(Ok) Fer que als DB accepti nombres negatius

() Fer que accepti les directives: "module bios .... endmodule" per poder fer referencia a les etiques de la forma: bios.RUTINA
() Validar que els echo [message], [message], ... funcionin. Sembla que de moment només ens dona el pc de l'etiqueta ??
(Validar) Validar el calcul de expressions per exemple .equ value 0x1234 - 28
